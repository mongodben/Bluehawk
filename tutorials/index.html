<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Create Checkpointed Tutorials | Bluehawk</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://mongodb-university.github.io/Bluehawk/tutorials/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Create Checkpointed Tutorials | Bluehawk"><meta data-react-helmet="true" name="description" content="Do you prefer learning through videos? Check out our video on"><meta data-react-helmet="true" property="og:description" content="Do you prefer learning through videos? Check out our video on"><link data-react-helmet="true" rel="canonical" href="https://mongodb-university.github.io/Bluehawk/tutorials/"><link data-react-helmet="true" rel="alternate" href="https://mongodb-university.github.io/Bluehawk/tutorials/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mongodb-university.github.io/Bluehawk/tutorials/" hreflang="x-default"><link rel="stylesheet" href="/Bluehawk/assets/css/styles.3b4610ff.css">
<link rel="preload" href="/Bluehawk/assets/js/runtime~main.34bd7857.js" as="script">
<link rel="preload" href="/Bluehawk/assets/js/main.45164b84.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Bluehawk/"><b class="navbar__title">Bluehawk Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mongodb-university/Bluehawk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/install">Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/commands">Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/use-cases">Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Bluehawk/plugins">Plugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Bluehawk/code-snippets/">Extract Code Snippets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Bluehawk/tutorials/">Tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Bluehawk/continuous-integration/">Continuous Integration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Develop</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create Checkpointed Tutorials</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Do you prefer learning through videos? Check out our video on
<a href="/Bluehawk/#generate-code-for-tutorial-apps">Generate Code for Tutorial Apps</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="state-in-bluehawk">State in Bluehawk<a aria-hidden="true" class="hash-link" href="#state-in-bluehawk" title="Direct link to heading">â€‹</a></h2><p>Bluehawk has a concept we call <code>state</code>. This gives you the ability to
represent different &quot;states&quot; for tutorials. For example, you might have
a <code>start</code> state where a code example is a <code>TODO:</code> block. Then, you might
have a <code>final</code> state where the actual code exists in that code block. </p><p>The Realm Docs team uses <code>state</code> to create checkpointed tutorials.
The output of a given state becomes a git repository branch; i.e. the <code>start</code>
branch. In this example, our
<a href="https://github.com/mongodb-university/realm-tutorial-react-native/blob/ee05c6d9eb8d2975e7f8d34679c8c2a94ce00298/providers/TasksProvider.js#L32" target="_blank" rel="noopener noreferrer">Realm React Native tutorial&#x27;s start branch</a>
features several <code>TODO:</code> blocks:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// TODO: Open the project realm with the given configuration and store</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// it in the realmRef. Once opened, fetch the Task objects in the realm,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// sorted by name, and attach a listener to the Task collection. When the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// listener fires, use the setTasks() function to apply the updated Tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// list to the state.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>final</code> branch has <a href="https://github.com/mongodb-university/realm-tutorial-react-native/blob/57cfbe9749972b50cbfa7df071d6cc60f1cc1f38/providers/TasksProvider.js#L32" target="_blank" rel="noopener noreferrer">completed code</a>,
instead:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Realm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">projectRealm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> projectRealm</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> syncTasks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> projectRealm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">objects</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Task&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> sortedTasks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> syncTasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sorted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">sortedTasks</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sortedTasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">sortedTasks</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We manage this in a single file using Bluehawk <code>state</code>. This simplifies
testing and maintaining the tutorials.</p><p>Under the covers, <code>state</code> is an identifier that the Bluehawk CLI uses
when it generates output. </p><p>You can use any string identifier you&#x27;d like as your <code>state</code> keyword;
we use <code>start</code>, <code>final</code>, <code>local</code>, and <code>sync</code> based on what we are teaching
in the tutorial. You use this identifier with a <a href="/Bluehawk/reference/tags#state">state</a>
or <a href="/Bluehawk/reference/tags#state-uncomment">state-uncomment</a> tag when you
annotate a tutorial&#x27;s code files.</p><p>Then, when you use the CLI to extract code snippets, you pass the <code>state</code>
identifier you used when annotating the file to extract just the code
snippets for that state. You pass this <a href="/Bluehawk/reference/cli#state">state as a flag</a>
to the Bluehawk CLI <a href="/Bluehawk/reference/cli#snip">snip</a> or <a href="/Bluehawk/reference/cli#copy">copy</a>
commands.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="annotate-the-tutorial">Annotate the Tutorial<a aria-hidden="true" class="hash-link" href="#annotate-the-tutorial" title="Direct link to heading">â€‹</a></h2><p>Start by annotating your tutorial with <a href="/Bluehawk/reference/tags">Bluehawk tags</a>.
As with <a href="/Bluehawk/tutorials/code-snippets">code snippets</a>, you open and close a code block
with <code>snippet-start</code> and <code>snippet-end</code>. You can
<a href="/Bluehawk/tutorials/code-snippets#hide-or-remove-code">hide or remove code</a> if your tutorial
contains tests or boilerplate you don&#x27;t want to expose in your documentation.
You can also <a href="/Bluehawk/tutorials/code-snippets#replace">replace</a> awkward terms with more
readable ones if you have any namespace issues, or want to rename things
for consistency across docs.</p><p>The key to tutorials, though, is adding <code>state</code> annotations where you want
the content to change based on which state you want to show. This example
is from the Realm React Native Tutorial
<a href="https://github.com/mongodb/docs-realm/blob/master/tutorial/rn/providers/TasksProvider.js" target="_blank" rel="noopener noreferrer">TasksProvider.js file</a>.</p><p>We start a snippet called <code>clean-up</code>. Then you see <code>// :state-start: final</code>.
In this code snippet, <code>final</code> is the identifier we use for
<a href="https://github.com/mongodb-university/realm-tutorial-react-native/blob/final/providers/TasksProvider.js" target="_blank" rel="noopener noreferrer">the &quot;final&quot; branch</a>
in our clonable tutorial git repository. The code after the <code>final</code> state
start is the code that developers see in that branch.</p><p>Below that, you see <code>// :state-end: :state-uncomment-start: start</code> all
on the same line. This line ends the <code>:state-start: final</code> from a few lines
above. Then, it starts a new state, called <code>start</code>, and uncomments the
code in the <code>state-uncomment</code> section. The comment is &quot;double commented&quot; -
after uncommenting, it shows as a regular comment.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// :snippet-start: clean-up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// cleanup function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> projectRealm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">projectRealm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// :state-start: final</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        projectRealm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// :state-end: :state-uncomment-start: start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//// TODO: close the project realm and reset the realmRef&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//// current value to null.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// :state-uncomment-end:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// :snippet-end:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>After we extract the snippets, this code block looks like this in the <code>final</code>
state:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// cleanup function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> projectRealm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">projectRealm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        projectRealm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And this in the <code>start</code> state:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// cleanup function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> projectRealm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> realmRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">projectRealm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// TODO: close the project realm and reset the realmRef&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// current value to null.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setTasks</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can see Bluehawk has removed one of the levels of comment nesting.
It shows only the <code>TODO:</code> block in the <code>start</code> state, while the
<code>final</code> state shows only the final code - not the <code>TODO</code> block at all. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="use-the-cli-to-extract-snippets">Use the CLI to Extract Snippets<a aria-hidden="true" class="hash-link" href="#use-the-cli-to-extract-snippets" title="Direct link to heading">â€‹</a></h2><p>After you have annotated your tutorial code, use the Bluehawk CLI to extract
code snippets. The process is the same as when
<a href="/Bluehawk/tutorials/code-snippets#use-the-cli-to-extract-snippets">extracting code examples</a>,
because you&#x27;re doing the same thing - you just pass an additional <code>--state</code>
flag to indicate which state you want in the code example.</p><p>As with extracting code examples, you use the <code>bluehawk snip</code> command,
and you can
<a href="/Bluehawk/tutorials/code-snippets#extract-code-from-a-single-file">extract code from a single file</a>
or <a href="/Bluehawk/tutorials/code-snippets#extract-code-in-a-directory">from a directory</a>. But you
must run the command more than once, and each time you pass it the <code>state</code>
identifier whose code example you want to generate. </p><p>For example, for our annotated code above, we might use this command to
generate code for the <code>start</code> state:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">bluehawk snip -o source/tutorial/generated/code/start/ tutorial/rn/providers/TasksProvider.js --state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And then use this command to generate code for the <code>final</code> state:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">bluehawk snip -o source/tutorial/generated/code/final/ tutorial/rn/providers/TasksProvider.js --state</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">final</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The input file is the same in both cases. The output directory is different.
Every output file follows the same
<a href="/Bluehawk/tutorials/code-snippets#output-file-names">naming convention</a>, and there is
nothing in the file name to indicate the state that was used to generate
that file. In the example above, the generated file name would be
<code>TasksProvider.codeblock.clean-up.js</code> in both cases.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="include-the-snippets-in-your-documentation">Include the Snippets In Your Documentation<a aria-hidden="true" class="hash-link" href="#include-the-snippets-in-your-documentation" title="Direct link to heading">â€‹</a></h2><p>After annotating your tutorial code and extracting code examples with the
Bluehawk CLI, you&#x27;ve got code files in output directories.</p><p>Now it&#x27;s time to include those code files in your documentation.
How you do that depends on your documentation tooling. For info
about how the Realm docs team includes code examples in our documentation, see:
<a href="/Bluehawk/tutorials/code-snippets#include-the-snippets-in-your-documentation">Include Code Snippets In Your documentation</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="automatically-update-tutorial-code">Automatically Update Tutorial Code<a aria-hidden="true" class="hash-link" href="#automatically-update-tutorial-code" title="Direct link to heading">â€‹</a></h3><p>For our tutorial code, we do something extra. Our tutorial applications each
live in clonable GitHub artifact repositories so developers can clone and
run our tutorials. We have a
<a href="https://github.com/mongodb/docs-realm/blob/master/.github/workflows/push-to-artifact-repos.yml" target="_blank" rel="noopener noreferrer">GitHub Workflow</a>
that manages updating these tutorial repositories; we don&#x27;t push to these
repositories directly.</p><p>Instead, when we push to the <code>tutorial</code> directory in our documentation
repository, this GitHub workflow does a few things:</p><ul><li>It runs <code>bluehawk check</code> to <a href="/Bluehawk/reference/cli#check">verify there are no Bluehawk errors</a>
in our files.</li><li>It uses a <a href="https://github.com/mongodb/docs-realm/tree/master/.github/actions/push-to-artifact-repo" target="_blank" rel="noopener noreferrer">GitHub Action</a>
with a <a href="https://github.com/cbush/bluehawk-plugin-git" target="_blank" rel="noopener noreferrer">Bluehawk plugin</a>
to copy, commit, and push transformed code to artifact repos.</li></ul><p>The GitHub Action copies code examples for each Bluehawk state to a git
branch whose name is the same as the state name. This means that our
tutorial repositories are automatically updated when we make updates to
the source code in our documentation repository.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Bluehawk/code-snippets/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Extract Code Snippets</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Bluehawk/continuous-integration/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Continuous Integration<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#state-in-bluehawk" class="table-of-contents__link toc-highlight">State in Bluehawk</a></li><li><a href="#annotate-the-tutorial" class="table-of-contents__link toc-highlight">Annotate the Tutorial</a></li><li><a href="#use-the-cli-to-extract-snippets" class="table-of-contents__link toc-highlight">Use the CLI to Extract Snippets</a></li><li><a href="#include-the-snippets-in-your-documentation" class="table-of-contents__link toc-highlight">Include the Snippets In Your Documentation</a><ul><li><a href="#automatically-update-tutorial-code" class="table-of-contents__link toc-highlight">Automatically Update Tutorial Code</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Bluehawk/">Intro</a></li><li class="footer__item"><a class="footer__link-item" href="/Bluehawk/commands">Tags</a></li><li class="footer__item"><a class="footer__link-item" href="/Bluehawk/cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/Bluehawk/api">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/mongodb-university/Bluehawk" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Repo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/mongodb-university/Bluehawk/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contributing Guidelines<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/mongodb-university/Bluehawk/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Submit Issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/Bluehawk/assets/js/runtime~main.34bd7857.js"></script>
<script src="/Bluehawk/assets/js/main.45164b84.js"></script>
</body>
</html>